<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:wms_android.Converters"
             x:Class="wms_android.Views.ProfileView"
             Title="{Binding Title}">
    
    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:StringToBoolConverter x:Key="StringToBoolConverter" />
            <converters:InitialsConverter x:Key="InitialsConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    
    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">
            
            <!-- Loading Indicator -->
            <ActivityIndicator IsVisible="{Binding IsLoading}" IsRunning="{Binding IsLoading}" />
            
            <!-- Error Message -->
            <Label Text="{Binding ErrorMessage}" 
                   TextColor="Red" 
                   IsVisible="{Binding ErrorMessage, Converter={StaticResource StringToBoolConverter}}"
                   HorizontalOptions="Center" />
            
            <!-- Profile Header -->
            <Frame Padding="20" BorderColor="#2E7D32" HasShadow="True" CornerRadius="15">
                <VerticalStackLayout Spacing="15">
                    <HorizontalStackLayout Spacing="15" HorizontalOptions="Center">
                        <!-- Profile Picture Placeholder -->
                        <Frame HasShadow="True" CornerRadius="40" Padding="0" WidthRequest="80" HeightRequest="80" BackgroundColor="#2E7D32">
                            <Label Text="{Binding Username, Converter={StaticResource InitialsConverter}}" 
                                   FontSize="24" 
                                   FontAttributes="Bold" 
                                   TextColor="White" 
                                   HorizontalOptions="Center" 
                                   VerticalOptions="Center" />
                        </Frame>
                        
                        <VerticalStackLayout Spacing="5">
                            <Label Text="{Binding Username}" FontSize="20" FontAttributes="Bold" />
                            <Label Text="{Binding Role}" FontSize="14" TextColor="#666" />
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Personal Information -->
            <Frame Padding="20" BorderColor="#DDD" HasShadow="True" CornerRadius="10">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Personal Information" FontSize="18" FontAttributes="Bold" />
                    
                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto" RowSpacing="15" ColumnSpacing="15">
                        <Label Grid.Row="0" Grid.Column="0" Text="Username:" FontAttributes="Bold" />
                        <Label Grid.Row="0" Grid.Column="1" Text="{Binding Username}" />
                        
                        <Label Grid.Row="1" Grid.Column="0" Text="First Name:" FontAttributes="Bold" />
                        <Label Grid.Row="1" Grid.Column="1" Text="{Binding FirstName}" />
                        
                        <Label Grid.Row="2" Grid.Column="0" Text="Last Name:" FontAttributes="Bold" />
                        <Label Grid.Row="2" Grid.Column="1" Text="{Binding LastName}" />
                        
                        <Label Grid.Row="3" Grid.Column="0" Text="Email:" FontAttributes="Bold" />
                        <Label Grid.Row="3" Grid.Column="1" Text="{Binding Email}" />
                        
                        <Label Grid.Row="4" Grid.Column="0" Text="Role:" FontAttributes="Bold" />
                        <Label Grid.Row="4" Grid.Column="1" Text="{Binding Role}" />
                        
                        <Label Grid.Row="5" Grid.Column="0" Text="Branch:" FontAttributes="Bold" />
                        <Label Grid.Row="5" Grid.Column="1" Text="{Binding BranchName}" />
                    </Grid>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Account Information -->
            <Frame Padding="20" BorderColor="#DDD" HasShadow="True" CornerRadius="10">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Account Information" FontSize="18" FontAttributes="Bold" />
                    
                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto" RowSpacing="15" ColumnSpacing="15">
                        <Label Grid.Row="0" Grid.Column="0" Text="User ID:" FontAttributes="Bold" />
                        <Label Grid.Row="0" Grid.Column="1" Text="{Binding UserId}" />
                        
                        <Label Grid.Row="1" Grid.Column="0" Text="Joined:" FontAttributes="Bold" />
                        <Label Grid.Row="1" Grid.Column="1" Text="{Binding JoinedDate}" />
                    </Grid>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Refresh Button -->
            <Button Text="Refresh Profile" 
                    Command="{Binding RefreshProfileCommand}"
                    BackgroundColor="#2E7D32" 
                    TextColor="White" 
                    CornerRadius="8" />
            
        </VerticalStackLayout>
    </ScrollView>
</ContentPage> 